<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <title>Intranet</title>
    <link rel="stylesheet" href="css/nspk.css">
    <link rel="stylesheet" href="css/card.css">
    <link rel="stylesheet" href="css/card.contact-mini.css">
    <link rel="stylesheet" href="css/revised.metro.css">
    <link rel="stylesheet" href="css/loader.css">


    <script src="//static.nspk.ru/js/jquery-3.1.1.min.js"></script>
    <!--<script src="//static.nspk.ru/js/jquery-1.12.4.min.js"></script>-->

    <script src="//static.nspk.ru/Metro-UI-CSS/js/metro.min.js"></script>
    <script src="//static.nspk.ru/js/angular.min.js"></script>

    <!--<script src="//static.nspk.ru/js/angular-touch.min.js"></script>
    <script src="//static.nspk.ru/js/angular-animate.min.js"></script>-->


    <link rel="stylesheet" href="//static.nspk.ru/Metro-UI-CSS/css/metro.css">
    <link rel="stylesheet" href="//static.nspk.ru/Metro-UI-CSS/css/metro-colors.min.css">
    <link rel="stylesheet" href="//static.nspk.ru/Metro-UI-CSS/css/metro-icons.min.css">
    <link rel="stylesheet" href="//static.nspk.ru/Metro-UI-CSS/css/metro-responsive.min.css">
    <link rel="stylesheet" href="//static.nspk.ru/Metro-UI-CSS/css/metro-schemes.min.css">
    <link rel="stylesheet" href="//static.nspk.ru/css/jquery.dataTables.min.css">



    <script src="//static.nspk.ru/js/ev-emitter.js"></script>
    <script src="//static.nspk.ru/js/matches-selector.js"></script>
    <script src="//static.nspk.ru/js/utils.js"></script>
    <script src="//static.nspk.ru/js/get-size.js"></script>
    <script src="//static.nspk.ru/js/item.js"></script>
    <script src="//static.nspk.ru/js/outlayer.js"></script>
    <script src="//static.nspk.ru/js/masonry.pkgd.min.js"></script>
    <script src="//static.nspk.ru/js/jquery.dataTables.min.js"></script>

    <!-- //cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css -->

    <script src="//static.nspk.ru/awesomplete-gh-pages/awesomplete.min.js"></script>
    <link rel="stylesheet" href="//static.nspk.ru/awesomplete-gh-pages/awesomplete.css">

    <!-- optional -->
    <script src="//static.nspk.ru/js/imagesloaded.js"></script>
    <!-- /optional -->

    <script src="//static.nspk.ru/js/angular-masonry.min.js"></script>

    <!--App-->
    <script src="js/nspk.js"></script>
    <script src="js/lib.js"></script>
    <!-- <script src="js/gal.js"></script> -->
    <script src="js/jquery.vide.js"></script>
    <script src="js/jquery.events.binding.js"></script>


<!-- Piwik -->
<script type="text/javascript">PiwikSiteId = '2'</script>
<script src="//static.nspk.ru/piwik.conf/piwik.conf.js"></script>
<!-- End Piwik Code -->



</head>

<body ng-app="app" ng-controller="AppCtrl">
<div id="blur">
    <div data-vide-bg="img/v/back" data-vide-options="posterType: none, loop: true, muted: true, position: 0% 0%" id="full-background">
        <!--<img id="bi" src="#">-->
        <div id="background-overlay"></div>
    </div>

    <!-- <div id="maskTop"></div>
    <div id="maskBottom"></div>
    <div id="maskRight"></div>
    <div id="maskLeft"></div> -->



    <div style="height: 60px;"></div>
    <header class="app-bar c-red fixed-top" data-role="appbar">
        <div class="container">
            <a class="app-bar-element">
                <img src="../img/logo2.png" style="height: 32px; display: inline-block; margin-right: 10px;" ng-click="goHome();">
            </a>
            <span class="app-bar-divider"></span>
            <!-- onclick="onClickLink(this.id);return false;" -->
            <script type="text/ng-template" id="categoryTree">
                <a ng-href="{{ value || category.categories.length == 0 ? category.href.link : '#'}}" 
                ng-attr-id="{{value || 'category.id' !== '' ? category.id : undefined}}" 
                    ng-class="{{ category.categories.length }} == 0 ? '' : 'dropdown-toggle'" target="{{category.href.target}}">{{ category.title }}</a>
                <ul class="d-menu" data-role="{{ value || category.categories.length == 0 ? undefined : 'dropdown'}}" ng-if="category.categories">
                    <li data-flexorderorigin="0" data-flexorder="1" ng-repeat="category in category.categories" ng-include="'categoryTree'">
                    </li>
                </ul>
            </script>
            <ul class="app-bar-menu">
                <li data-flexorderorigin="0" data-flexorder="1" ng-repeat="category in categories" ng-include="'categoryTree'"></li>
            </ul>

            <div class="app-bar-element place-right">
                <a class="dropdown-toggle fg-white" onclick="PiwikTrack('AddressBook', 'lk', 'click')">
                    <span class="mif-user"></span>{{account.shortFName}}</a>
                <div class="app-bar-drop-container place-right cursor-default padding20" data-role="dropdown" data-no-close="true" style="display: none;">
                    <div id="lk">
                        <form>
                            <div class="img-container">
                                <div class="img-frame">
                                    <div class="img-img-mini" style="background-image: url(http://msk1-vm-inapp01.nspk.ru:81/api/Photo/?email={{account.mail}});">
                                    </div>
                                </div>
                                <div style="text-align: center; width: 100%;">
                                    <!-- <h5 class="name"></h5> -->
                                </div>
                            </div>
                            <div class="fio">{{account.label}}</div>
                            <div class="r text" style="width: 19rem">
                                {{account.description}}
                                <br />
                                <br /> {{account.division}}
                                <br />&nbsp;
                                <!-- <br /> {{account.departmentName}} -->
                            </div>
                            <div class="grid r text">
                                    <div class="row cells2">
                                        <div class="cell colspan2">
                                            Неиспользованные дни отпуска
                                        </div>
                                    </div>
                                    <div id="vloader" class="row cells3">
                                            <div class="cell"></div>    
                                        <div class="cell">
                                             <div data-role="preloader" data-type="ring"></div>
                                            </div>
                                            <div class="cell"></div>
                                    </div>                                    
                                    <div class="row cells2 vdatarow" ng-repeat="vc in Vacations.Holidays">
                                            <div class="cell r cell-dash">{{vc.LeaveType}}
                                            </div>
                                            <div class="cell v-align-middle r cell-dash">{{vc.Days}} дней
                                            </div>
                                    </div>
                                    <div ng-style="Vacations.Vacations ? {'display':''} : {'display':'none'}" class="row cells2">
                                            <div class="cell colspan2">
                                                 <div class="tag r text alert" onclick="metroDialog.toggle('#dialog10'); PiwikTrack('AddressBook', 'vh', 'click')">Посмотреть историю отпусков</div>                                                
                                            </div>
                                    </div>
                                    <div ng-style="Vacations.Graph ? {'display':''} : {'display':'none'}" class="row cells2">
                                            <div class="cell colspan2">
                                                 <div class="tag r text alert" onclick="metroDialog.toggle('#dialog11'); PiwikTrack('AddressBook', 'vg', 'click')">Посмотреть графтк отпусков</div>                                                
                                            </div>
                                    </div>
                                    <div class="row cells2">
                                            <div class="cell colspan2">
                                                 <div class="tag r text alert" onclick="PiwikTrack('AddressBook', 'fvr', 'click')" ng-click="GetFavorites()">Посмотреть избранное</div>                                                
                                            </div>
                                    </div>
                                    <div class="row cells4">
                                            <div class="r text cell" style="width: min-content;">
                                                    <label class="switch r">
                                                            <input type="checkbox" ng-model="UserSettings.showBirthday" ng-change="changeShowBirthday()">
                                                            <span class="check"></span>
                                                        </label>
                                            </div>
                                            <div class="r text cell colspan3">показывать коллегам мой день рождения</div>
                                    </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="search" class="app-bar-element place-right" style="min-width: 16rem;">
                <div class="input-control text" id="ajax-example" style="min-width: 16rem;">
                    <input class="awesomplete" placeholder="введите фамилию для поиска сотрудника" style="min-width: 16rem;" id="inpuut" ng-keyup="search_input($event)"
                    />
                    <!-- <button class="button"><span class="mif-search"></span></button> -->
                </div>
            </div>
            <div class="app-bar-pullbutton automatic" style="display: none;"></div>
            <div class="clearfix" style="width: 0;"></div>
            <nav class="app-bar-pullmenu hidden flexstyle-app-bar-menu" style="display: none;">
                <ul class="app-bar-pullmenubar hidden app-bar-menu"></ul>
            </nav>
        </div>
    </header>
    <div class="container page-content">



        <div class="panel r info shadow-1" ng-style="noobs.length != 0 ? {'display':''} : {'display':'none'}" ng-show="presenter">
            <div class="heading overflow-hidden">
                <!-- <span class="icon mif-info"></span> -->
                <span class="title">Новые сотрудники</span>
            </div>
            <div class="content padding10">
                <div class="card-noobs bg-white" ng-repeat="cnt in noobs" id="{{$index}}">
                    <div class="grid">
                        <div class="row cells3">
                            <div class="cell">
                                <div class="img-container">
                                    <div class="img-frame">
                                        <div class="img-img-mini" style="background-image: url(http://msk1-vm-inapp01.nspk.ru:81/api/Photo/?email={{cnt.mail}});">
                                        </div>
                                    </div>
                                    <div style="text-align: center; width: 100%;">
                                        <!-- <h5 class="name">{{cnt.label}}</h5> -->
                                    </div>
                                </div>
                            </div>
                            <div class="cell colspan2">
                                <a href="chart/?{{cnt.id}}&{{cnt.parent}}" target="_blank">
                                    <span class="no-margin-top fg-gray-700 text">{{cnt.label}}</span>
                                </a>
                                <br>
                                <hr class="r" ng-class="cnt.colorClass">
                                <!-- <span class="mif-users ico"></span>&nbsp;&nbsp; -->
                                <a href="chart/?{{cnt.id}}&{{cnt.parent}}" target="_blank">
                                    <span class="no-margin-top title">{{cnt.division}}</span>
                                </a>
                                <br>
                                <!-- <span class="mif-mail ico"></span>&nbsp;&nbsp;<span class="text"><a href="mailto:{{cnt.mail}}">{{cnt.mail}}</a></span><br>
                                        <span class="mif-phone ico"></span>&nbsp;&nbsp;<span class="text">{{cnt.phone}}</span><br>
                                        <span class="mif-gift ico"></span>&nbsp;&nbsp;<span class="text">{{cnt.birthday}}</span>
                                        <span ng-style="cnt.state ? {'display':'inline'} : {'display':'none'}"><br><span class="mif-calendar ico"></span>&nbsp;&nbsp;
                                        <span class="text">{{cnt.state === "Работа" ? "В отпуске после ": cnt.state + " до " }}{{cnt.expDate}}</span><br></span> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="panel r news shadow-1 collapsible collapsed" ng-show="presenter" data-role="panel">
                <div class="heading overflow-hidden" onclick="PiwikTrack('AddressBook', 'bdayPanel', 'click')">
                    <span class="icon mif-gift"></span>
                    <span class="title">Ближайшие дни рождения </span>
                </div>
                <div class="content padding10 justify-flex">
                    <div class="r h tag" ng-class="bday.colorClass" ng-click="clickDialog(bday)" ng-repeat="bday in birthday" id="{{$index}}">
                            <span class="mif-gift"></span>&nbsp;{{bday.label}}&nbsp;&nbsp;{{bday.birthday}}
                    </div>
                </div>
            </div>

            <script type="text/ng-template" id="cardContact">
                <div class="grid">
                        <div class="row cells3">
                            <div class="cell">
                                <div class="img-container">
                                    <div class="img-frame">
                                        <div class="img-img" style="background-image: url(http://msk1-vm-inapp01.nspk.ru:81/api/Photo/?email={{cnt.mail}});">
                                        </div>
                                    </div>
                                    <div style="text-align: center; width: 100%;">
                                        <div class="name">{{cnt.label}}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="cell colspan2">
                                <div class="card-content bg-white shadow-1">
                                    <div class="justify-flex">
                                    <div class="h r no-margin-top fg-gray-700">КОНТАКТ</div>
                                    <div ng-style="$index > -1 ? {'display':''} : {'display':'none'}" ng-click="FavoritesClick($index, cnt)">
                                        <div class="h r tag" ng-class=" cnt.fvr ? '' : ''">{{cnt.fvr ? "&#128204;": "в избранное" }}</div>
                                    </div>
                                    </div>
                                    <hr class="bg-c-gray">
                                    <span class="mif-user ico"></span>&nbsp;&nbsp;<a href="chart/?{{cnt.id}}&{{cnt.parent}}" target="_blank"><span class="title">{{cnt.description}}</span></a><br>
                                    <span class="mif-users ico"></span>&nbsp;&nbsp;<a href="chart/?{{cnt.id}}&{{cnt.parent}}" target="_blank"><span class="title">{{cnt.division}}</span></a><br>
                                    <span class="mif-mail ico"></span>&nbsp;&nbsp;<span class="text"><a href="mailto:{{cnt.mail}}">{{cnt.mail}}</a></span><br>
                                    <span class="mif-phone ico"></span>&nbsp;&nbsp;<span class="text">{{cnt.phone}}</span><br>
                                    <span ng-style="cnt.birthday ? {'display':'inline'} : {'display':'none'}"><span class="mif-gift ico"></span>&nbsp;&nbsp;<span class="text">{{cnt.birthday}}</span></span>
                                    <span ng-style="cnt.state ? {'display':'inline'} : {'display':'none'}"><br><span class="mif-calendar ico"></span>&nbsp;&nbsp;
                                    <span class="text">{{cnt.state === "Работа" ? "Отсутствие в офисе с ": cnt.state + " до " }}{{cnt.expDate}}</span><br></span>
                                </div>
                            </div>
                        </div>
                    </div>
            </script>



        <div masonry id="msnr" on-scroll-to-bottom="loadNext()" load-images="true" column-width="100" style="width: 100%" masonry-options="{ fitWidth: true, horizontalOrder: true, gutter: 0 }">


            <div class="card contact shadow-1 masonry-brick" ng-class="cnt.colorClass" id="{{$index}}" ng-repeat="cnt in contacts" ng-include="'cardContact'"></div>


           

            <div class="masonry-brick c-wraper" id="{{$index}}" ng-repeat="data in news">
                <div class="card news image-header shadow-1">
                    <div class="card-header fg-white" ng-style="data.titleImage.length !== 0 ? {'background-image': 'url({{data.titleImage}})'} : {'background-image': 'url(http://static.nspk.ru/img/dr.emmett.brown.jpg)'}">
                        <p>{{data.title}}</p>
                    </div>
                    <div class="card-content bg-white">
                        <p class="fg-gray">{{data.pubDate}}</p>
                        {{data.article}}
                    </div>
                    <div class="card-footer bg-white">
                        <span class="tag" ng-repeat="cat in data.tags">{{cat}}</span>
                        <a class="tag success" target="_blank" href="http://nspk.online/">
                            <span class="mif-link"></span>
                        </a>
                    </div>
                </div>
            </div>
            <!--<div class="gal shadow-2 masonry-brick" id="{{$index}}" style="" ng-repeat="itm in gal track by $index">
            <img src="pic/thumb/{{itm.href_thumb}}" data-id="{{$index}}" data-full="{{itm.href_full}}" onclick="showFull(this);">
        </div>-->

        </div>
    </div>
    <!-- <div id="full-img-overlay" class="dark-overlay">
        <a id="download-button" href="pic/{{full}}" class="overlay-btn cycle-button large-button bg-grayLight fg-white block-shadow-info text-shadow"
            download>
            <span class="icon mif-download mif-15x"></span>
        </a>
        <a id="cancel-button" class="overlay-btn cycle-button large-button bg-grayLight fg-white block-shadow-info text-shadow">
            <span class="icon mif-cross mif-15x"></span>
        </a>
        <span id="img-index" class="overlay-btn large-button fg-white text-shadow v-align-middle align-center">{{imdNdx}}
            <br>&#x2015;
            <br>{{ingCount}}</span>
        <div id="full-img" style="background-image: url('pic/{{full}}');"></div>
    </div> -->
<div data-role="dialog" id="dialog9" class="dialog r" data-close-button="false" data-overlay="true"
    data-overlay-color="op-dark" data-overlay-click-close="true" style="width: auto; height: auto; visibility: hidden; left: 797.5px; top: 443px;"
    data-on-click="console.log('ololo');">
    <div class="card contact" ng-class="cnt.colorClass" id="{{$index}}" ng-include="'cardContact'"></div>
</div>

<div data-role="dialog" id="dialog10" class="dialog padding20" data-close-button="false" data-overlay="true"
data-overlay-color="op-dark" data-overlay-click-close="true" style="width: auto; height: auto; visibility: hidden; left: 797.5px; top: 443px;">
<div class="h r margin-tb20">История отпусков</div>
<table id="example" class="display" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Тип отпуска</th>
                <th>С</th>
                <th>По</th>
                <th>Кол-во дней</th>
            </tr>
        </thead>
    </table>
</div>


<div data-role="dialog" id="dialog11" class="dialog padding20" data-close-button="false" data-overlay="true"
data-overlay-color="op-dark" data-overlay-click-close="true" style="width: auto; height: auto; visibility: hidden; left: 797.5px; top: 443px;">
<div class="h r margin-tb20">График отпусков</div>
<table id="example2" class="display" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Тип отпуска</th>
                <th>С</th>
                <th>По</th>
                <th>Кол-во дней</th>
            </tr>
        </thead>
    </table>
</div>


</div>
<!-- <div id="ololo" class="dark-overlay" style="z-index: 9010; display: none;">
        <div class="cont">
            <div class="a"></div>
            <div class="b"></div>
        </div>
        <div class="cont">
            <div class="a"></div>
            <div class="b"></div>
        </div>

        <div class="cont">
            <div class="c"></div>
            <div class="d"></div>
        </div>
        <div class="cont">
            <div class="c"></div>
            <div class="d"></div>
        </div>       
</div> -->
</body>
</html>