[
  {
    "key": "QuizMainInfo.QuizName",
    "title": "Название",
    "type": "string",
    "onChange": "log(modelValue)",
    "required": "true"
  },

  {
    "key": "QuizMainInfo.QuizDescription",
    "type": "textarea",
    "title": "Описание",
    "required": "true"
  },
  {
    "key": "QuizMainInfo.QuizType",
    "type": "select",
    "title": "Тип",
    "titleMap": [
      {
        "value": 1,
        "name": "Опрос"
      },
      {
        "value": 2,
        "name": "Тестирование (в разработке)"
      }
    ]
  },
  {
    "key": "QuizMainInfo.State",
    "type": "select",
    "title": "Состояние",
    "titleMap": [
      {
        "value": 1,
        "name": "Опубликован"

      },
      {
        "value": 2,
        "name": "Черновик"
      }
    ]
  },
  {
    "key": "QuizMainInfo.StartDate",
    "format": "yyyy-mm-dd",
    "type": "datepicker",
    "title": "Дата начала опроса",
    "required": "true"
  },
  {
    "key": "QuizMainInfo.EndDate",
    "format": "yyyy-mm-dd",
    "type": "datepicker",
    "title": "Дата завершения опроса",
    "required": "true"
  },
  {
    "key": "Questions",
    "title": "{{ value.name || 'Вопрос '+($index+1) }}",
    "add": "Добавить",
    "remove": "Вопрос",
    "type": "tabarray",
    "style": {
      "remove": "btn-danger"
    },
    "items": [
      {
        "key": "Questions[].QuestionText",
        "title": "Текст вопроса",
        "required": "true"
      },
      {
        "key": "Questions[].QuestionPictures",
        "title": "{{ value.name || ($index+1) }}",
        "add": " ",
        "remove": " ",
        "type": "tabarray",
        "style": {
          "remove": "btn-danger"
        },
        "items": [
          {
            "key": "Questions[].QuestionPictures[].QuestionPicture",
            "placeholder": "Нажмите или перенесите файл в эту область",
            "required": "false",
            "validationMessage": {
              "base64FileUploadSize": "Максимальный размер {{(schema.maxSize / 1024) / 1024}} MB."
            }
          }
        ]
      },
          {
            "key": "Questions[].QuestionType.TypeOfQuestion",
            "title": "Тип вопроaса",
            "type": "radiobuttons",
            "required": "true",
            "style": {
              "selected": "btn-success",
              "unselected": "btn-default"
            },
            "titleMap": [
              {
                "value": 1,
                "name": "Один ответ"
              },
              {
                "value": 2,
                "name": "Несколько ответов"
              }
            ],
            "default": 1
          },

          {
            "key": "Questions[].QuestionType.Kind",
            "type": "radiobuttons",
            "title": "Вид ответа",
            "required": "true",
            "condition": "model.Questions[$index].QuestionType.TypeOfQuestion=='1'",
            "style": {
              "selected": "btn-success",
              "unselected": "btn-default"
            },
            "titleMap": [
              {
                "value": 1,
                "name": "Свободный"
              },
              {
                "value": 3,
                "name": "Только свой вариант"
              },
              {
                "value": 2,
                "name": "NPS"
              }
            ],
            "default": 1
          },
          {
            "key": "Questions[].QuestionType.Require",
            "condition": "model.QuizMainInfo.QuizType=='1' && (model.Questions[$index].QuestionType.Kind=='1' || model.Questions[$index].QuestionType.TypeOfQuestion == '2')",
            "title": "Вопрос требует ответа"
          },
          {
            "key": "Questions[].AllowYourAnswer",
            "condition": "model.Questions[$index].QuestionType.Kind=='1' || model.Questions[$index].QuestionType.TypeOfQuestion == '2'",
            "title": "Разрешить пользовательский вариант"
          },
          {
            "key": "Questions[].Answers",
            "condition": "model.Questions[$index].QuestionType.Kind =='1' || model.Questions[$index].QuestionType.TypeOfQuestion == '2'",
            "add": "Ответ",
            "title": "Варианты ответов:",
            "style": {
              "add": "btn-success"
            },
            "items": [
              {
                "key": "Questions[].Answers[].AnswerText",
                "type": "string",
                "title": "Текст ответа",
                "required": "true"
              }
            ]
          }
        ]
      },
  {
    "type": "actions",
    "items": [
      {
        "type": "submit",
        "id": "submit",
        "style": "btn-primary",
        "title": "Сохранить"
      }
    ]
  }
]

